---
title: numpy对数组的基本操作
comments: true
tags:
  - Python
  - 数据分析
categories:
  - 数据分析
date: 2019-04-28 12:40:49
---


```python
import numpy as np
```

```python
# 生成10位同学的Python，Django，Scrapy三门课程成绩(0-150)的数组
scores = np.round(np.random.uniform(150, size=(10, 3)), 1)
scores
```

<!--more-->

```
array([[111.2,  77.2,  26.7],
       [113.5, 108.9,  90.6],
       [ 75.7,  51.5, 136.1],
       [128.9, 125.3, 120.2],
       [121.8, 125.6,  18.4],
       [116.3,  50.2,  42.6],
       [ 43.9, 110.2,  65.7],
       [ 74.1, 150. , 105.8],
       [ 62.6,  81.1, 132. ],
       [ 91.2,  12.9,  89.5]])
```



```python
score.shape
```



```
(10, 3)
```



### 索引操作

- arr[index]
- arr[row_index,col_index]

```python
# 查看第5位同学的所有课程成绩
five_score = scores[4]
five_score
```



```
array([ 80.1, 140.4,   4.5])
```



```python
score[4][1] #第五位同学第二门课程的成绩，索引从0开始
```



```
140.5
```



```python
score[4, 1] 
```



```
140.5
```



### 索引切片

- arr[start:end:step] 行切，如果是一维数组同list切片相同
- arr[:,start:end:step] 列切，行索引部分是：表示所有行，也可使用行切

```python
# 查看前三位同学的所有成绩
scores[:3]
```



```
array([[111.2,  77.2,  26.7],
       [113.5, 108.9,  90.6],
       [ 75.7,  51.5, 136.1]])
```



```python
# 查看所有同学的前两门课程的成绩
scores[:,:2]
```



```
array([[111.2,  77.2],
       [113.5, 108.9],
       [ 75.7,  51.5],
       [128.9, 125.3],
       [121.8, 125.6],
       [116.3,  50.2],
       [ 43.9, 110.2],
       [ 74.1, 150. ],
       [ 62.6,  81.1],
       [ 91.2,  12.9]])
```



```python
scores[:,[0, 2]] #查看所有同学的第一门、第三门课程的成绩
```



```
array([[111.2,  26.7],
       [113.5,  90.6],
       [ 75.7, 136.1],
       [128.9, 120.2],
       [121.8,  18.4],
       [116.3,  42.6],
       [ 43.9,  65.7],
       [ 74.1, 105.8],
       [ 62.6, 132. ],
       [ 91.2,  89.5]])
```



```python
# 查看第一位，第五位，第七位同学的第一门、第三门课程的成绩
# 注意：ndarry不支持行和列同时局部选择
scores[[0,4,6]][:,[0,2]]
```



```
array([[111.2,  26.7],
       [121.8,  18.4],
       [ 43.9,  65.7]])
```



### ndarry的变形 shape

```python
heights = np.random.randint(155,190,size=10)
heights
```



```
array([164, 184, 158, 179, 158, 183, 175, 185, 164, 163])
```



```python
# 将10个元素大小的一维数组变形为三种形状（2,5）（5,2）（10,1）
heights.reshape(2,5)
```



```
array([[164, 184, 158, 179, 158],
       [183, 175, 185, 164, 163]])
```



```python
heights.reshape(5,2)
```



```
array([[164, 184],
       [158, 179],
       [158, 183],
       [175, 185],
       [164, 163]])
```



```python
heights.reshape((-1,1))  # -1表示任意行数，1表示一列
```



```
array([[164],
       [184],
       [158],
       [179],
       [158],
       [183],
       [175],
       [185],
       [164],
       [163]])
```



### ndarry的转置 T/transpose()

```python
hh = heights.reshape((2,5))
hh
```



```
array([[164, 184, 158, 179, 158],
       [183, 175, 185, 164, 163]])
```



```python
hh.T 
hh.transpose()
```



```
array([[164, 183],
       [184, 175],
       [158, 185],
       [179, 164],
       [158, 163]])
```



### ndarry的级联操作

- np.concatenate((arr1, arr2),axis=0)
- np.hstack(arr1,arr2)
- np.vstack(arr1, arr2)

```python
a_heights = np.random.randint(155, 190, size=(3, 2))
b_heights = np.random.randint(155, 190, size=(3, 2))
c_heights = np.random.randint(155, 190, size=(3, 2))
display(a_heights, b_heights, c_heights)
```

```
array([[179, 170],
       [179, 181],
       [179, 175]])
```



```
array([[160, 187],
       [175, 177],
       [182, 181]])
```



```
array([[167, 177],
       [177, 162],
       [187, 185]])
```



```python
# 将 a和b的两个ndarray级联合并
np.concatenate((a_heights, b_heights), axis=1)  # 将每一个一维数组中的元素提取，并加对应行上。
```



```
array([[179, 170, 160, 187],
       [179, 181, 175, 177],
       [179, 175, 182, 181]])
```



```python
np.hstack((a_heights, b_heights))
```



```
array([[179, 170, 160, 187],
       [179, 181, 175, 177],
       [179, 175, 182, 181]])
```



```python
np.vstack((a_heights, b_heights))
```



```
array([[179, 170],
       [179, 181],
       [179, 175],
       [160, 187],
       [175, 177],
       [182, 181]])
```



```python
a = np.random.randint(100, size=(3, 2, 4))
b = np.random.randint(100, size=(3, 2, 4))
display(a, b)
```

```
array([[[ 2, 17,  6, 83],
        [56, 98, 32,  5]],

       [[54, 68, 65, 83],
        [67, 24, 72, 46]],

       [[95, 22, 50, 33],
        [77, 70, 82,  0]]])
```



```
array([[[53, 71, 63, 35],
        [92, 47, 12, 99]],

       [[45, 36, 24, 16],
        [85,  9, 50, 63]],

       [[53, 69, 41, 77],
        [ 2, 23, 77, 63]]])
```



```python
np.concatenate((a, b), axis=1)  # 结果的shape是什么？
```



```
array([[[ 2, 17,  6, 83],
        [56, 98, 32,  5],
        [53, 71, 63, 35],
        [92, 47, 12, 99]],

       [[54, 68, 65, 83],
        [67, 24, 72, 46],
        [45, 36, 24, 16],
        [85,  9, 50, 63]],

       [[95, 22, 50, 33],
        [77, 70, 82,  0],
        [53, 69, 41, 77],
        [ 2, 23, 77, 63]]])
```



```python
np.concatenate((a, b), axis=-1)  # 结果的shape是什么？
```



```
array([[[ 2, 17,  6, 83, 53, 71, 63, 35],
        [56, 98, 32,  5, 92, 47, 12, 99]],

       [[54, 68, 65, 83, 45, 36, 24, 16],
        [67, 24, 72, 46, 85,  9, 50, 63]],

       [[95, 22, 50, 33, 53, 69, 41, 77],
        [77, 70, 82,  0,  2, 23, 77, 63]]])
```



### ndarry的切分 split

```python
c = np.concatenate((a, b))
c.shape
```



```
(6, 2, 4)
```



```python
d = c.reshape((-1, 4))
d
```



```
array([[ 2, 17,  6, 83],
       [56, 98, 32,  5],
       [54, 68, 65, 83],
       [67, 24, 72, 46],
       [95, 22, 50, 33],
       [77, 70, 82,  0],
       [53, 71, 63, 35],
       [92, 47, 12, 99],
       [45, 36, 24, 16],
       [85,  9, 50, 63],
       [53, 69, 41, 77],
       [ 2, 23, 77, 63]])
```



```python
# 将c的ndarry从第四开始分割出两个ndarry
np.split(d, 6) # 如果 int 的数值，表示平均分多少个数组对象
```



```
[array([[ 2, 17,  6, 83],
        [56, 98, 32,  5]]), array([[54, 68, 65, 83],
        [67, 24, 72, 46]]), array([[95, 22, 50, 33],
        [77, 70, 82,  0]]), array([[53, 71, 63, 35],
        [92, 47, 12, 99]]), array([[45, 36, 24, 16],
        [85,  9, 50, 63]]), array([[53, 69, 41, 77],
        [ 2, 23, 77, 63]])]
```



```python
# 如果切割的indicies_or_secions的参数是[]列表类型，表示从第哪一部分上分割出来
np.split(d, [3]) 
```



```
[array([[ 2, 17,  6, 83],
        [56, 98, 32,  5],
        [54, 68, 65, 83]]), array([[67, 24, 72, 46],
        [95, 22, 50, 33],
        [77, 70, 82,  0],
        [53, 71, 63, 35],
        [92, 47, 12, 99],
        [45, 36, 24, 16],
        [85,  9, 50, 63],
        [53, 69, 41, 77],
        [ 2, 23, 77, 63]])]
```



```python
# axis = 0 纵向切割，从维度的最外层看所有一维数组
np.split(d, [3, 4], axis=0) # 将数组分割成三个部分，[0`-3),[3-4),[4,-1]
```



```
[array([[ 2, 17,  6, 83],
        [56, 98, 32,  5],
        [54, 68, 65, 83]]), array([[67, 24, 72, 46]]), array([[95, 22, 50, 33],
        [77, 70, 82,  0],
        [53, 71, 63, 35],
        [92, 47, 12, 99],
        [45, 36, 24, 16],
        [85,  9, 50, 63],
        [53, 69, 41, 77],
        [ 2, 23, 77, 63]])]
```



```python
# 将d的数组的第3列切割为一个ndarry
np.split(d, [2,3], axis=1)
```



```
[array([[ 2, 17],
        [56, 98],
        [54, 68],
        [67, 24],
        [95, 22],
        [77, 70],
        [53, 71],
        [92, 47],
        [45, 36],
        [85,  9],
        [53, 69],
        [ 2, 23]]), array([[ 6],
        [32],
        [65],
        [72],
        [50],
        [82],
        [63],
        [12],
        [24],
        [50],
        [41],
        [77]]), array([[83],
        [ 5],
        [83],
        [46],
        [33],
        [ 0],
        [35],
        [99],
        [16],
        [63],
        [77],
        [63]])]
```



### ndarry的copy副本

```python
d2  = d.copy() #深拷贝
d2
```



```
array([[ 2, 17,  6, 83],
       [56, 98, 32,  5],
       [54, 68, 65, 83],
       [67, 24, 72, 46],
       [95, 22, 50, 33],
       [77, 70, 82,  0],
       [53, 71, 63, 35],
       [92, 47, 12, 99],
       [45, 36, 24, 16],
       [85,  9, 50, 63],
       [53, 69, 41, 77],
       [ 2, 23, 77, 63]])
```



```python
d2[0,0] = 100
d2
```



```
array([[100,  17,   6,  83],
       [ 56,  98,  32,   5],
       [ 54,  68,  65,  83],
       [ 67,  24,  72,  46],
       [ 95,  22,  50,  33],
       [ 77,  70,  82,   0],
       [ 53,  71,  63,  35],
       [ 92,  47,  12,  99],
       [ 45,  36,  24,  16],
       [ 85,   9,  50,  63],
       [ 53,  69,  41,  77],
       [  2,  23,  77,  63]])
```



```python
d
```



```
array([[ 2, 17,  6, 83],
       [56, 98, 32,  5],
       [54, 68, 65, 83],
       [67, 24, 72, 46],
       [95, 22, 50, 33],
       [77, 70, 82,  0],
       [53, 71, 63, 35],
       [92, 47, 12, 99],
       [45, 36, 24, 16],
       [85,  9, 50, 63],
       [53, 69, 41, 77],
       [ 2, 23, 77, 63]])
```



```python
weights = np.random.randint(50, 120, size=(5, 3))
weights
```



```
array([[116,  67,  70],
       [ 60, 115, 111],
       [ 62,  54,  69],
       [ 57,  59,  74],
       [ 51,  71,  99]])
```



```python
weights_copy = weights.copy() #深拷贝
weights[-1, -1] = 88
weights
```



```
array([[116,  67,  70],
       [ 60, 115, 111],
       [ 62,  54,  69],
       [ 57,  59,  74],
       [ 51,  71,  88]])
```



```python
weights_copy
```



```
array([[116,  67,  70],
       [ 60, 115, 111],
       [ 62,  54,  69],
       [ 57,  59,  74],
       [ 51,  71,  99]])
```
