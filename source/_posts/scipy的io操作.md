---
title: scipy的io操作
comments: true
tags:
  - Python
  - 数据分析
categories:
  - 数据分析
date: 2019-05-06 19:26:14
---


### io的保存与加载

- scipy.io.savemat()
- scipy.io.loadmat()

<!--more-->

```python
import numpy as np
from scipy import io
```

```python
# 生成一个1-100之间的1000个等差数列
data = np.linspace(1, 100, num=1000).reshape((100,10))
data.shape
```



```
(100, 10)
```



```python
# 将生成的ndarray的数组保存起来
# 以io模块
io.savemat('data.mat', mdict={
    'X': data,
    'name': '1-100的1000个等差数列'
})
```

```python
# 加载mat文件，获取数据
dmat=io.loadmat('data.mat') # 返回一个字典对象
dmat
```



```
{'__header__': b'MATLAB 5.0 MAT-file Platform: posix, Created on: Mon May  6 17:17:43 2019',
 '__version__': '1.0',
 '__globals__': [],
 'X': array([[  1.        ,   1.0990991 ,   1.1981982 ,   1.2972973 ,
           1.3963964 ,   1.4954955 ,   1.59459459,   1.69369369,
           1.79279279,   1.89189189],
        [  1.99099099,   2.09009009,   2.18918919,   2.28828829,
           2.38738739,   2.48648649,   2.58558559,   2.68468468,
           2.78378378,   2.88288288],
        [  2.98198198,   3.08108108,   3.18018018,   3.27927928,
           3.37837838,   3.47747748,   3.57657658,   3.67567568,
           3.77477477,   3.87387387],
        [  3.97297297,   4.07207207,   4.17117117,   4.27027027,
           4.36936937,   4.46846847,   4.56756757,   4.66666667,
           4.76576577,   4.86486486],
        [  4.96396396,   5.06306306,   5.16216216,   5.26126126,
           5.36036036,   5.45945946,   5.55855856,   5.65765766,
           5.75675676,   5.85585586],
        [  5.95495495,   6.05405405,   6.15315315,   6.25225225,
           6.35135135,   6.45045045,   6.54954955,   6.64864865,
           6.74774775,   6.84684685],
        [  6.94594595,   7.04504505,   7.14414414,   7.24324324,
           7.34234234,   7.44144144,   7.54054054,   7.63963964,
           7.73873874,   7.83783784],
        [  7.93693694,   8.03603604,   8.13513514,   8.23423423,
           8.33333333,   8.43243243,   8.53153153,   8.63063063,
           8.72972973,   8.82882883],
        [  8.92792793,   9.02702703,   9.12612613,   9.22522523,
           9.32432432,   9.42342342,   9.52252252,   9.62162162,
           9.72072072,   9.81981982],
        [  9.91891892,  10.01801802,  10.11711712,  10.21621622,
          10.31531532,  10.41441441,  10.51351351,  10.61261261,
          10.71171171,  10.81081081],
        [ 10.90990991,  11.00900901,  11.10810811,  11.20720721,
          11.30630631,  11.40540541,  11.5045045 ,  11.6036036 ,
          11.7027027 ,  11.8018018 ],
        [ 11.9009009 ,  12.        ,  12.0990991 ,  12.1981982 ,
          12.2972973 ,  12.3963964 ,  12.4954955 ,  12.59459459,
          12.69369369,  12.79279279],
        [ 12.89189189,  12.99099099,  13.09009009,  13.18918919,
          13.28828829,  13.38738739,  13.48648649,  13.58558559,
          13.68468468,  13.78378378],
        [ 13.88288288,  13.98198198,  14.08108108,  14.18018018,
          14.27927928,  14.37837838,  14.47747748,  14.57657658,
          14.67567568,  14.77477477],
        [ 14.87387387,  14.97297297,  15.07207207,  15.17117117,
          15.27027027,  15.36936937,  15.46846847,  15.56756757,
          15.66666667,  15.76576577],
        [ 15.86486486,  15.96396396,  16.06306306,  16.16216216,
          16.26126126,  16.36036036,  16.45945946,  16.55855856,
          16.65765766,  16.75675676],
        [ 16.85585586,  16.95495495,  17.05405405,  17.15315315,
          17.25225225,  17.35135135,  17.45045045,  17.54954955,
          17.64864865,  17.74774775],
        [ 17.84684685,  17.94594595,  18.04504505,  18.14414414,
          18.24324324,  18.34234234,  18.44144144,  18.54054054,
          18.63963964,  18.73873874],
        [ 18.83783784,  18.93693694,  19.03603604,  19.13513514,
          19.23423423,  19.33333333,  19.43243243,  19.53153153,
          19.63063063,  19.72972973],
        [ 19.82882883,  19.92792793,  20.02702703,  20.12612613,
          20.22522523,  20.32432432,  20.42342342,  20.52252252,
          20.62162162,  20.72072072],
        [ 20.81981982,  20.91891892,  21.01801802,  21.11711712,
          21.21621622,  21.31531532,  21.41441441,  21.51351351,
          21.61261261,  21.71171171],
        [ 21.81081081,  21.90990991,  22.00900901,  22.10810811,
          22.20720721,  22.30630631,  22.40540541,  22.5045045 ,
          22.6036036 ,  22.7027027 ],
        [ 22.8018018 ,  22.9009009 ,  23.        ,  23.0990991 ,
          23.1981982 ,  23.2972973 ,  23.3963964 ,  23.4954955 ,
          23.59459459,  23.69369369],
        [ 23.79279279,  23.89189189,  23.99099099,  24.09009009,
          24.18918919,  24.28828829,  24.38738739,  24.48648649,
          24.58558559,  24.68468468],
        [ 24.78378378,  24.88288288,  24.98198198,  25.08108108,
          25.18018018,  25.27927928,  25.37837838,  25.47747748,
          25.57657658,  25.67567568],
        [ 25.77477477,  25.87387387,  25.97297297,  26.07207207,
          26.17117117,  26.27027027,  26.36936937,  26.46846847,
          26.56756757,  26.66666667],
        [ 26.76576577,  26.86486486,  26.96396396,  27.06306306,
          27.16216216,  27.26126126,  27.36036036,  27.45945946,
          27.55855856,  27.65765766],
        [ 27.75675676,  27.85585586,  27.95495495,  28.05405405,
          28.15315315,  28.25225225,  28.35135135,  28.45045045,
          28.54954955,  28.64864865],
        [ 28.74774775,  28.84684685,  28.94594595,  29.04504505,
          29.14414414,  29.24324324,  29.34234234,  29.44144144,
          29.54054054,  29.63963964],
        [ 29.73873874,  29.83783784,  29.93693694,  30.03603604,
          30.13513514,  30.23423423,  30.33333333,  30.43243243,
          30.53153153,  30.63063063],
        [ 30.72972973,  30.82882883,  30.92792793,  31.02702703,
          31.12612613,  31.22522523,  31.32432432,  31.42342342,
          31.52252252,  31.62162162],
        [ 31.72072072,  31.81981982,  31.91891892,  32.01801802,
          32.11711712,  32.21621622,  32.31531532,  32.41441441,
          32.51351351,  32.61261261],
        [ 32.71171171,  32.81081081,  32.90990991,  33.00900901,
          33.10810811,  33.20720721,  33.30630631,  33.40540541,
          33.5045045 ,  33.6036036 ],
        [ 33.7027027 ,  33.8018018 ,  33.9009009 ,  34.        ,
          34.0990991 ,  34.1981982 ,  34.2972973 ,  34.3963964 ,
          34.4954955 ,  34.59459459],
        [ 34.69369369,  34.79279279,  34.89189189,  34.99099099,
          35.09009009,  35.18918919,  35.28828829,  35.38738739,
          35.48648649,  35.58558559],
        [ 35.68468468,  35.78378378,  35.88288288,  35.98198198,
          36.08108108,  36.18018018,  36.27927928,  36.37837838,
          36.47747748,  36.57657658],
        [ 36.67567568,  36.77477477,  36.87387387,  36.97297297,
          37.07207207,  37.17117117,  37.27027027,  37.36936937,
          37.46846847,  37.56756757],
        [ 37.66666667,  37.76576577,  37.86486486,  37.96396396,
          38.06306306,  38.16216216,  38.26126126,  38.36036036,
          38.45945946,  38.55855856],
        [ 38.65765766,  38.75675676,  38.85585586,  38.95495495,
          39.05405405,  39.15315315,  39.25225225,  39.35135135,
          39.45045045,  39.54954955],
        [ 39.64864865,  39.74774775,  39.84684685,  39.94594595,
          40.04504505,  40.14414414,  40.24324324,  40.34234234,
          40.44144144,  40.54054054],
        [ 40.63963964,  40.73873874,  40.83783784,  40.93693694,
          41.03603604,  41.13513514,  41.23423423,  41.33333333,
          41.43243243,  41.53153153],
        [ 41.63063063,  41.72972973,  41.82882883,  41.92792793,
          42.02702703,  42.12612613,  42.22522523,  42.32432432,
          42.42342342,  42.52252252],
        [ 42.62162162,  42.72072072,  42.81981982,  42.91891892,
          43.01801802,  43.11711712,  43.21621622,  43.31531532,
          43.41441441,  43.51351351],
        [ 43.61261261,  43.71171171,  43.81081081,  43.90990991,
          44.00900901,  44.10810811,  44.20720721,  44.30630631,
          44.40540541,  44.5045045 ],
        [ 44.6036036 ,  44.7027027 ,  44.8018018 ,  44.9009009 ,
          45.        ,  45.0990991 ,  45.1981982 ,  45.2972973 ,
          45.3963964 ,  45.4954955 ],
        [ 45.59459459,  45.69369369,  45.79279279,  45.89189189,
          45.99099099,  46.09009009,  46.18918919,  46.28828829,
          46.38738739,  46.48648649],
        [ 46.58558559,  46.68468468,  46.78378378,  46.88288288,
          46.98198198,  47.08108108,  47.18018018,  47.27927928,
          47.37837838,  47.47747748],
        [ 47.57657658,  47.67567568,  47.77477477,  47.87387387,
          47.97297297,  48.07207207,  48.17117117,  48.27027027,
          48.36936937,  48.46846847],
        [ 48.56756757,  48.66666667,  48.76576577,  48.86486486,
          48.96396396,  49.06306306,  49.16216216,  49.26126126,
          49.36036036,  49.45945946],
        [ 49.55855856,  49.65765766,  49.75675676,  49.85585586,
          49.95495495,  50.05405405,  50.15315315,  50.25225225,
          50.35135135,  50.45045045],
        [ 50.54954955,  50.64864865,  50.74774775,  50.84684685,
          50.94594595,  51.04504505,  51.14414414,  51.24324324,
          51.34234234,  51.44144144],
        [ 51.54054054,  51.63963964,  51.73873874,  51.83783784,
          51.93693694,  52.03603604,  52.13513514,  52.23423423,
          52.33333333,  52.43243243],
        [ 52.53153153,  52.63063063,  52.72972973,  52.82882883,
          52.92792793,  53.02702703,  53.12612613,  53.22522523,
          53.32432432,  53.42342342],
        [ 53.52252252,  53.62162162,  53.72072072,  53.81981982,
          53.91891892,  54.01801802,  54.11711712,  54.21621622,
          54.31531532,  54.41441441],
        [ 54.51351351,  54.61261261,  54.71171171,  54.81081081,
          54.90990991,  55.00900901,  55.10810811,  55.20720721,
          55.30630631,  55.40540541],
        [ 55.5045045 ,  55.6036036 ,  55.7027027 ,  55.8018018 ,
          55.9009009 ,  56.        ,  56.0990991 ,  56.1981982 ,
          56.2972973 ,  56.3963964 ],
        [ 56.4954955 ,  56.59459459,  56.69369369,  56.79279279,
          56.89189189,  56.99099099,  57.09009009,  57.18918919,
          57.28828829,  57.38738739],
        [ 57.48648649,  57.58558559,  57.68468468,  57.78378378,
          57.88288288,  57.98198198,  58.08108108,  58.18018018,
          58.27927928,  58.37837838],
        [ 58.47747748,  58.57657658,  58.67567568,  58.77477477,
          58.87387387,  58.97297297,  59.07207207,  59.17117117,
          59.27027027,  59.36936937],
        [ 59.46846847,  59.56756757,  59.66666667,  59.76576577,
          59.86486486,  59.96396396,  60.06306306,  60.16216216,
          60.26126126,  60.36036036],
        [ 60.45945946,  60.55855856,  60.65765766,  60.75675676,
          60.85585586,  60.95495495,  61.05405405,  61.15315315,
          61.25225225,  61.35135135],
        [ 61.45045045,  61.54954955,  61.64864865,  61.74774775,
          61.84684685,  61.94594595,  62.04504505,  62.14414414,
          62.24324324,  62.34234234],
        [ 62.44144144,  62.54054054,  62.63963964,  62.73873874,
          62.83783784,  62.93693694,  63.03603604,  63.13513514,
          63.23423423,  63.33333333],
        [ 63.43243243,  63.53153153,  63.63063063,  63.72972973,
          63.82882883,  63.92792793,  64.02702703,  64.12612613,
          64.22522523,  64.32432432],
        [ 64.42342342,  64.52252252,  64.62162162,  64.72072072,
          64.81981982,  64.91891892,  65.01801802,  65.11711712,
          65.21621622,  65.31531532],
        [ 65.41441441,  65.51351351,  65.61261261,  65.71171171,
          65.81081081,  65.90990991,  66.00900901,  66.10810811,
          66.20720721,  66.30630631],
        [ 66.40540541,  66.5045045 ,  66.6036036 ,  66.7027027 ,
          66.8018018 ,  66.9009009 ,  67.        ,  67.0990991 ,
          67.1981982 ,  67.2972973 ],
        [ 67.3963964 ,  67.4954955 ,  67.59459459,  67.69369369,
          67.79279279,  67.89189189,  67.99099099,  68.09009009,
          68.18918919,  68.28828829],
        [ 68.38738739,  68.48648649,  68.58558559,  68.68468468,
          68.78378378,  68.88288288,  68.98198198,  69.08108108,
          69.18018018,  69.27927928],
        [ 69.37837838,  69.47747748,  69.57657658,  69.67567568,
          69.77477477,  69.87387387,  69.97297297,  70.07207207,
          70.17117117,  70.27027027],
        [ 70.36936937,  70.46846847,  70.56756757,  70.66666667,
          70.76576577,  70.86486486,  70.96396396,  71.06306306,
          71.16216216,  71.26126126],
        [ 71.36036036,  71.45945946,  71.55855856,  71.65765766,
          71.75675676,  71.85585586,  71.95495495,  72.05405405,
          72.15315315,  72.25225225],
        [ 72.35135135,  72.45045045,  72.54954955,  72.64864865,
          72.74774775,  72.84684685,  72.94594595,  73.04504505,
          73.14414414,  73.24324324],
        [ 73.34234234,  73.44144144,  73.54054054,  73.63963964,
          73.73873874,  73.83783784,  73.93693694,  74.03603604,
          74.13513514,  74.23423423],
        [ 74.33333333,  74.43243243,  74.53153153,  74.63063063,
          74.72972973,  74.82882883,  74.92792793,  75.02702703,
          75.12612613,  75.22522523],
        [ 75.32432432,  75.42342342,  75.52252252,  75.62162162,
          75.72072072,  75.81981982,  75.91891892,  76.01801802,
          76.11711712,  76.21621622],
        [ 76.31531532,  76.41441441,  76.51351351,  76.61261261,
          76.71171171,  76.81081081,  76.90990991,  77.00900901,
          77.10810811,  77.20720721],
        [ 77.30630631,  77.40540541,  77.5045045 ,  77.6036036 ,
          77.7027027 ,  77.8018018 ,  77.9009009 ,  78.        ,
          78.0990991 ,  78.1981982 ],
        [ 78.2972973 ,  78.3963964 ,  78.4954955 ,  78.59459459,
          78.69369369,  78.79279279,  78.89189189,  78.99099099,
          79.09009009,  79.18918919],
        [ 79.28828829,  79.38738739,  79.48648649,  79.58558559,
          79.68468468,  79.78378378,  79.88288288,  79.98198198,
          80.08108108,  80.18018018],
        [ 80.27927928,  80.37837838,  80.47747748,  80.57657658,
          80.67567568,  80.77477477,  80.87387387,  80.97297297,
          81.07207207,  81.17117117],
        [ 81.27027027,  81.36936937,  81.46846847,  81.56756757,
          81.66666667,  81.76576577,  81.86486486,  81.96396396,
          82.06306306,  82.16216216],
        [ 82.26126126,  82.36036036,  82.45945946,  82.55855856,
          82.65765766,  82.75675676,  82.85585586,  82.95495495,
          83.05405405,  83.15315315],
        [ 83.25225225,  83.35135135,  83.45045045,  83.54954955,
          83.64864865,  83.74774775,  83.84684685,  83.94594595,
          84.04504505,  84.14414414],
        [ 84.24324324,  84.34234234,  84.44144144,  84.54054054,
          84.63963964,  84.73873874,  84.83783784,  84.93693694,
          85.03603604,  85.13513514],
        [ 85.23423423,  85.33333333,  85.43243243,  85.53153153,
          85.63063063,  85.72972973,  85.82882883,  85.92792793,
          86.02702703,  86.12612613],
        [ 86.22522523,  86.32432432,  86.42342342,  86.52252252,
          86.62162162,  86.72072072,  86.81981982,  86.91891892,
          87.01801802,  87.11711712],
        [ 87.21621622,  87.31531532,  87.41441441,  87.51351351,
          87.61261261,  87.71171171,  87.81081081,  87.90990991,
          88.00900901,  88.10810811],
        [ 88.20720721,  88.30630631,  88.40540541,  88.5045045 ,
          88.6036036 ,  88.7027027 ,  88.8018018 ,  88.9009009 ,
          89.        ,  89.0990991 ],
        [ 89.1981982 ,  89.2972973 ,  89.3963964 ,  89.4954955 ,
          89.59459459,  89.69369369,  89.79279279,  89.89189189,
          89.99099099,  90.09009009],
        [ 90.18918919,  90.28828829,  90.38738739,  90.48648649,
          90.58558559,  90.68468468,  90.78378378,  90.88288288,
          90.98198198,  91.08108108],
        [ 91.18018018,  91.27927928,  91.37837838,  91.47747748,
          91.57657658,  91.67567568,  91.77477477,  91.87387387,
          91.97297297,  92.07207207],
        [ 92.17117117,  92.27027027,  92.36936937,  92.46846847,
          92.56756757,  92.66666667,  92.76576577,  92.86486486,
          92.96396396,  93.06306306],
        [ 93.16216216,  93.26126126,  93.36036036,  93.45945946,
          93.55855856,  93.65765766,  93.75675676,  93.85585586,
          93.95495495,  94.05405405],
        [ 94.15315315,  94.25225225,  94.35135135,  94.45045045,
          94.54954955,  94.64864865,  94.74774775,  94.84684685,
          94.94594595,  95.04504505],
        [ 95.14414414,  95.24324324,  95.34234234,  95.44144144,
          95.54054054,  95.63963964,  95.73873874,  95.83783784,
          95.93693694,  96.03603604],
        [ 96.13513514,  96.23423423,  96.33333333,  96.43243243,
          96.53153153,  96.63063063,  96.72972973,  96.82882883,
          96.92792793,  97.02702703],
        [ 97.12612613,  97.22522523,  97.32432432,  97.42342342,
          97.52252252,  97.62162162,  97.72072072,  97.81981982,
          97.91891892,  98.01801802],
        [ 98.11711712,  98.21621622,  98.31531532,  98.41441441,
          98.51351351,  98.61261261,  98.71171171,  98.81081081,
          98.90990991,  99.00900901],
        [ 99.10810811,  99.20720721,  99.30630631,  99.40540541,
          99.5045045 ,  99.6036036 ,  99.7027027 ,  99.8018018 ,
          99.9009009 , 100.        ]]),
 'name': array(['1-100的1000个等差数列'], dtype='<U15')}
```



```python
dmat['name'][0]
```



```
'1-100的1000个等差数列'
```



```python
dmat['X'].shape
```



```
(100, 10)
```



### 扩展Python对象的序列化和反序列化

- pickle.dump(obj,fp) 将对象序列化成字节流，并写入到fp的文件对象中
- pickle.load(fp) 将字节流反序列化成对象

```python
def ss(name, age):
    print(name, age)
```

```python
ss
```



```
<function __main__.ss(name, age)>
```



```python
import pickle
```

```python
# 将 ss函数对象保存到文件
with open('ss.func', 'wb') as f:
    pickle.dump(ss, f)
```

```python
# 加载 ss.func的文件,获取ss函数对象
with open('ss.func', 'rb') as f:
    s_func = pickle.load(f)
    print(s_func)
s_func('disen', '20')
```

```
<function ss at 0x7f66bb6e16a8>
disen 20
```



```python
# 将data的ndarray对象存储到data.nd文件中
with open('data.nd', 'wb') as f:
    pickle.dump(data, f)
    print('写入成功')
```

```
写入成功
```



```python
#　将data数据从data.nd中加载出来
with open('data.nd', 'rb') as f:
    d = pickle.load(f)
    print(d.shape)
```

```
(100, 10)
```