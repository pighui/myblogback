---
title: ndarray的运算操作
comments: true
tags:
  - Python
  - 数据分析
categories:
  - 数据分析
date: 2019-04-28 14:41:10
---


### ndarray的基本算术运算

```python
import numpy as np
```

```python
# 创建一位同学的三门课程成绩
a_score = np.random.randint(150, size=3)
a_score
```

<!--more-->

```
array([ 65, 122, 123])
```



```python
a_score +=10  # 每门课程都加10分
a_score
```



```
array([ 85, 142, 143])
```



```python
a_score[1] += 30  给某一门成绩加30分
a_score
```



```
array([ 85, 172, 143])
```



```python
# 将最后一门课程的成绩，修改为平均成绩+10分
a_score[-1] = a_score.mean() + 10
a_score
```



```
array([ 85, 172, 143])
```



```python
# 设置第二门课程的成绩为空，表示没有考试
a_score[1]=0 # 数组中不能出现None值 -> pandas.nan
a_score
```



```
array([ 85,   0, 143])
```

```python

# 创建五位同学的H5，Java，Testing和Python四门课程的成绩
scores = np.random.randint(100, size=(5, 4))
scores
```



```
array([[42, 54, 25, 19],
       [ 7, 26, 36, 94],
       [73, 88, 50, 88],
       [89, 98, 19, 11],
       [95, 70, 94, 59]])
```



```python
# 第三位同学的所有课程成绩都加上十分
scores[2] += 10 
scores

```

```
array([[42, 54, 25, 19],
       [ 7, 26, 36, 94],
       [83, 98, 60, 98],
       [89, 98, 19, 11],
       [95, 70, 94, 59]])
```



```python
scores *= 2 # 所有人的每一门课程都乘以2
scores
```



```
array([[ 84, 108,  50,  38],
       [ 14,  52,  72, 188],
       [166, 196, 120, 196],
       [178, 196,  38,  22],
       [190, 140, 188, 118]])
```



```python
# 将所有人的第一门课程和最后一门课程置为0
scores[:,[0, -1]] =0
scores
```



```
array([[  0, 108,  50,   0],
       [  0,  52,  72,   0],
       [  0, 196, 120,   0],
       [  0, 196,  38,   0],
       [  0, 140, 188,   0]])
```



### ndarray特有的广播机制

- 为缺失的维度自动补1
- 使用现有元素填充空值

```python
a  = np.array([1,2,3])
a += 10 # 10 -> [10,10,10]
a
```



```
array([11, 12, 13])
```



```python
a = np.array([1,2,3])
a += np.array([10,10,10])
a
```



```
array([11, 12, 13])
```



```python
b = np.array([[1,2],[3,4]])
b += 15 # 15 -> [[15,15],[15,15]]
b 
```



```
array([[16, 17],
       [18, 19]])
```



```python
b = np.array([[1,2],[3,4]])
b += np.array([[15,15],[15,15]])
b 
```



```
array([[16, 17],
       [18, 19]])
```



```python
c = np.array([[5,7],[10,20]])
b += c
b
```



```
array([[21, 24],
       [28, 39]])
```



```python
d = np.array([8,9]) # [8,9] -> [[8,9],[8,9]]
b -= d
b
```



```
array([[13, 15],
       [20, 30]])
```



### 矩阵积的操作

- np.dot()

```python
# 前提条件:前面数组的列数和后面数组的行数保持一致
a = np.array([[1,3,5],
              [2,4,6]])
b = np.array([[10,20,30],
              [1,2,3],
              [4,5,6]])
np.dot(a,b)
```



```
array([[ 33,  51,  69],
       [ 48,  78, 108]])
```
