<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','/js/analytics.js','ga');

ga('create', 'UA-135687698-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


    
    <title>
        在docker中安装elasticsearch以及用法的介绍 |
        
        欢迎浏览本博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    
    
        <meta name="keywords" content="Ubuntu,Linux,Python,Python Web,爬虫,数据分析,机器学习">
    
    <meta name="description" content="ElasticSearch是一个基于Lucene的搜索服务器。它提供了一个分布式多用户能力的全文搜索引擎，基于RESTful web接口。Elasticsearch是用Java开发的，并作为Apache许可条款下的开放源码发布，是当前流行的企业级搜索引擎。设计用于云计算中，能够达到实时搜索，稳定，可靠，快速，安装使用方便。">
<meta name="keywords" content="Docker">
<meta property="og:type" content="article">
<meta property="og:title" content="在docker中安装elasticsearch以及用法的介绍">
<meta property="og:url" content="https://www.xuhuiblog.cn/Docker/在docker中安装elasticsearch以及用法的介绍/index.html">
<meta property="og:site_name" content="欢迎浏览本博客">
<meta property="og:description" content="ElasticSearch是一个基于Lucene的搜索服务器。它提供了一个分布式多用户能力的全文搜索引擎，基于RESTful web接口。Elasticsearch是用Java开发的，并作为Apache许可条款下的开放源码发布，是当前流行的企业级搜索引擎。设计用于云计算中，能够达到实时搜索，稳定，可靠，快速，安装使用方便。">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-04-29T11:37:02.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="在docker中安装elasticsearch以及用法的介绍">
<meta name="twitter:description" content="ElasticSearch是一个基于Lucene的搜索服务器。它提供了一个分布式多用户能力的全文搜索引擎，基于RESTful web接口。Elasticsearch是用Java开发的，并作为Apache许可条款下的开放源码发布，是当前流行的企业级搜索引擎。设计用于云计算中，能够达到实时搜索，稳定，可靠，快速，安装使用方便。">
    
        <link rel="alternate" href="/atom.xml" title="欢迎浏览本博客" type="application/atom+xml">
    
    
        <link rel="icon" href="/images/favicon.ico">
    
    
        <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
    
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/highlight.css">
    <script>
        let antiquityStorage = window.sessionStorage.getItem('antiquitySessionStorage');
        if (antiquityStorage == '' || antiquityStorage == null) {
            var antiquityLoader = '<div id="loaderbox"><div class="loader"><div class="load-roll"><div class="load-top"></div><div class="load-right"></div><div class="load-bottom"></div></div></div></div>';
            document.write(antiquityLoader);
            document.body.style.overflow = 'hidden'
        }
    </script>
</head>
</html>
<body>
<div id="fullpage" class="mobile-nav-right">
    
    <div id="wrapper" style="background-image: url(/images/bg.jpg)"
         title="图片来自网络">
        

            <header id="header">
  <div id="nav-toggle" class="nav-toggle"></div>
  <div class="head-box global-width">
    <nav class="nav-box nav-right">
      
        <a class="nav-item" href="/" title>首页</a>
      
        <a class="nav-item" href="https://github.com/pighui" title>基友</a>
      
        <a class="nav-item" href="/archives" title>文章</a>
      
        <a class="nav-item" href="/me" title>简历</a>
      
        <a class="nav-item" href="/snow" title>看雪</a>
      
    </nav>
  </div>
</header>
            <div id="middlecontent" title class="global-width sidebar-right">
                <section id="main"><article id="post-在docker中安装elasticsearch以及用法的介绍" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 class="article-title" itemprop="name">
      在docker中安装elasticsearch以及用法的介绍
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/Docker/在docker中安装elasticsearch以及用法的介绍/" class="article-date">
  <time datetime="2019-04-22T05:35:59.000Z" itemprop="datePublished">2019-04-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Docker/">Docker</a>
  </div>

    
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/">Docker</a></li></ul>

  </div>
  
    <span id="busuanzi_container_page_pv">
      本文总阅读量<span id="busuanzi_value_page_pv"></span>次
    </span>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <p><a href="https://baike.baidu.com/item/elasticsearch" target="_blank" rel="noopener">ElasticSearch</a>是一个基于Lucene的搜索服务器。它提供了一个分布式多用户能力的全文搜索引擎，基于RESTful web接口。Elasticsearch是用Java开发的，并作为Apache许可条款下的开放源码发布，是当前流行的企业级搜索引擎。设计用于云计算中，能够达到实时搜索，稳定，可靠，快速，安装使用方便。</p>
<a id="more"></a>
<p>我们建立一个网站或应用程序，并要添加搜索功能，但是想要完成搜索工作的创建是非常困难的。我们希望搜索解决方案要运行速度快，我们希望能有一个零配置和一个完全免费的搜索模式，我们希望能够简单地使用JSON通过HTTP来索引数据，我们希望我们的搜索服务器始终可用，我们希望能够从一台开始并扩展到数百台，我们要实时搜索，我们要简单的多租户，我们希望建立一个云的解决方案。因此我们利用Elasticsearch来解决所有这些问题及可能出现的更多其它问题。</p>
<p>本文将介绍在Docker中安装elasticsearch以及简单的用法。</p>
<h1 id="ElasticSearch-Docker安装文档"><a href="#ElasticSearch-Docker安装文档" class="headerlink" title="ElasticSearch Docker安装文档"></a>ElasticSearch Docker安装文档</h1><blockquote>
<p>参考文档： <a href="https://www.elastic.co/guide/en/elasticsearch/reference/6.7/docker.html#docker-prod-cluster-composefile" target="_blank" rel="noopener">https://www.elastic.co/guide/en/elasticsearch/reference/6.7/docker.html#docker-prod-cluster-composefile</a></p>
</blockquote>
<h2 id="1-拉-ES镜像"><a href="#1-拉-ES镜像" class="headerlink" title="1.拉 ES镜像"></a>1.拉 ES镜像</h2><div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker pull elasticsearch</span><br></pre></td></tr></table></figure></div>
<h2 id="2-添加用户组"><a href="#2-添加用户组" class="headerlink" title="2.添加用户组"></a>2.添加用户组</h2><div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo groupadd docker</span><br><span class="line">sudo usermod -aG docker <span class="variable">$USER</span></span><br><span class="line">sudo reboot</span><br></pre></td></tr></table></figure></div>
<p>这样以后运行docker就不需要加上sudo</p>
<h2 id="3-运行ES镜像"><a href="#3-运行ES镜像" class="headerlink" title="3.运行ES镜像"></a>3.运行ES镜像</h2><blockquote>
<p>开发模式下的启动方式</p>
</blockquote>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 9200:9200 -p 9300:9300 -e <span class="string">"discovery.type=single-node"</span> docker.elastic.co/elasticsearch/elasticsearch:6.7.0</span><br></pre></td></tr></table></figure></div>
<p> 测试是否启动成功：  <a href="http://localhost:9200，返回json数据如下：" target="_blank" rel="noopener">http://localhost:9200，返回json数据如下：</a></p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot; : &quot;4XRkHUX&quot;,</span><br><span class="line">  &quot;cluster_name&quot; : &quot;elasticsearch&quot;,</span><br><span class="line">  &quot;cluster_uuid&quot; : &quot;IzcS_d3mTjmWUKCUDMiTyg&quot;,</span><br><span class="line">  &quot;version&quot; : &#123;</span><br><span class="line">    &quot;number&quot; : &quot;5.6.12&quot;,</span><br><span class="line">    &quot;build_hash&quot; : &quot;cfe3d9f&quot;,</span><br><span class="line">    &quot;build_date&quot; : &quot;2018-09-10T20:12:43.732Z&quot;,</span><br><span class="line">    &quot;build_snapshot&quot; : false,</span><br><span class="line">    &quot;lucene_version&quot; : &quot;6.6.1&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;tagline&quot; : &quot;You Know, for Search&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h1 id="ElasticSearch使用文档"><a href="#ElasticSearch使用文档" class="headerlink" title="ElasticSearch使用文档"></a>ElasticSearch使用文档</h1><h2 id="1-产品模式"><a href="#1-产品模式" class="headerlink" title="1.产品模式"></a>1.产品模式</h2><p>关于 vm.max_map_count 内核参数， 在产品模式下，至少设置为 262144</p>
<ol>
<li><p>Linux</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ grep vm.max_map_count /etc/sysctl.conf</span><br><span class="line">vm.max_map_count=262144</span><br></pre></td></tr></table></figure></div>
<p>应用设置命令</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl -w vm.max_map_count=262144</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>Mac</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ screen ~/Library/Containers/com.docker.docker/Data/vms/0/tty</span><br></pre></td></tr></table></figure></div>
</li>
</ol>
<ol start="3">
<li><p>Window-DockTools</p>
<p><code>必须为每一台docker-machine设置vm.max_map_count</code>参数:</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker-machine ssh</span><br><span class="line">sudo sysctl -w vm.max_map_count=262144</span><br></pre></td></tr></table></figure></div>
</li>
</ol>
<h2 id="2-集群-compose方式"><a href="#2-集群-compose方式" class="headerlink" title="2.集群-compose方式"></a>2.集群-compose方式</h2><p>使用docker-compose编排技术， 创建docker-compose.yml 文件</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">version: &apos;2.2&apos;</span><br><span class="line">services:</span><br><span class="line">  elasticsearch:</span><br><span class="line">    image: docker.elastic.co/elasticsearch/elasticsearch:6.7.0</span><br><span class="line">    container_name: elasticsearch</span><br><span class="line">    environment:</span><br><span class="line">      - cluster.name=docker-cluster</span><br><span class="line">      - bootstrap.memory_lock=true</span><br><span class="line">      - &quot;ES_JAVA_OPTS=-Xms512m -Xmx512m&quot;</span><br><span class="line">    ulimits:</span><br><span class="line">      memlock:</span><br><span class="line">        soft: -1</span><br><span class="line">        hard: -1</span><br><span class="line">    volumes:</span><br><span class="line">      - esdata1:/usr/share/elasticsearch/data</span><br><span class="line">    ports:</span><br><span class="line">      - 9200:9200</span><br><span class="line">    networks:</span><br><span class="line">      - esnet</span><br><span class="line">  elasticsearch2:</span><br><span class="line">    image: docker.elastic.co/elasticsearch/elasticsearch:6.7.0</span><br><span class="line">    container_name: elasticsearch2</span><br><span class="line">    environment:</span><br><span class="line">      - cluster.name=docker-cluster</span><br><span class="line">      - bootstrap.memory_lock=true</span><br><span class="line">      - &quot;ES_JAVA_OPTS=-Xms512m -Xmx512m&quot;</span><br><span class="line">      - &quot;discovery.zen.ping.unicast.hosts=elasticsearch&quot;</span><br><span class="line">    ulimits:</span><br><span class="line">      memlock:</span><br><span class="line">        soft: -1</span><br><span class="line">        hard: -1</span><br><span class="line">    volumes:</span><br><span class="line">      - esdata2:/usr/share/elasticsearch/data</span><br><span class="line">    networks:</span><br><span class="line">      - esnet</span><br><span class="line"></span><br><span class="line">volumes:</span><br><span class="line">  esdata1:</span><br><span class="line">    driver: local</span><br><span class="line">  esdata2:</span><br><span class="line">    driver: local</span><br><span class="line"></span><br><span class="line">networks:</span><br><span class="line">  esnet:</span><br></pre></td></tr></table></figure></div>
<h2 id="API接口"><a href="#API接口" class="headerlink" title="API接口"></a>API接口</h2><h3 id="API接口约定"><a href="#API接口约定" class="headerlink" title="API接口约定"></a>API接口约定</h3><blockquote>
<p>参考： </p>
<ul>
<li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/6.7/api-conventions.html" target="_blank" rel="noopener">https://www.elastic.co/guide/en/elasticsearch/reference/6.7/api-conventions.html</a></li>
<li><a href="https://es.xiaoleilu.com/050_Search/15_Pagination.html" target="_blank" rel="noopener">https://es.xiaoleilu.com/050_Search/15_Pagination.html</a></li>
</ul>
</blockquote>
<p>ElasticSearch整体使用RESTful规范，基于HTTP协议，并使用json格式的数据进行交互， 除非有特殊规定。</p>
<p>主要分四个方面：</p>
<ul>
<li>Multiple Indices  多索引</li>
<li>Date math support in index names 索引名中支持日期</li>
<li>Common options  通用参数</li>
<li>URL-based access control 网址访问控制</li>
</ul>
<h3 id="ES术语"><a href="#ES术语" class="headerlink" title="ES术语"></a>ES术语</h3><ul>
<li>Document文档数据（就是具体存在ES中一条数据)</li>
<li>Index索引（可以理解为mysql中的数据库）  </li>
<li>Type索引中的数据类型（可以理解为mysql中的table）  </li>
<li>Field字段，文档的属性  </li>
<li>Query DSL查询语法</li>
</ul>
<h3 id="索引API"><a href="#索引API" class="headerlink" title="索引API"></a>索引API</h3><h4 id="1-创建索引"><a href="#1-创建索引" class="headerlink" title="1. 创建索引"></a>1. 创建索引</h4><p>接口： <a href="http://localhost:9200/foods" target="_blank" rel="noopener">http://localhost:9200/foods</a>  </p>
<p>请求方法： PUT</p>
<p>参数：</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   <span class="string">"settings"</span> : &#123;</span><br><span class="line">      <span class="string">"number_of_shards"</span> : <span class="number">5</span>,</span><br><span class="line">      <span class="string">"number_of_replicas"</span> : <span class="number">1</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>参数说明：</p>
<ul>
<li>number_of_shards 主分片数量（默认一个索引被分配5个主分片）</li>
<li>number_of_replicas 复制分片的数量（每个主分片都有一个复制分片 ）</li>
</ul>
<p>返回数据：</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;acknowledged&quot;: true,</span><br><span class="line">    &quot;shards_acknowledged&quot;: true,</span><br><span class="line">    &quot;index&quot;: &quot;aa_indexs&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h4 id="2-查看索引"><a href="#2-查看索引" class="headerlink" title="2. 查看索引"></a>2. 查看索引</h4><p>接口： <a href="http://localhost:9200/foods" target="_blank" rel="noopener">http://localhost:9200/foods</a>  </p>
<p>方法： GET</p>
<p>返回： </p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;foods&quot;: &#123;</span><br><span class="line">        &quot;aliases&quot;: &#123;&#125;,</span><br><span class="line">        &quot;mappings&quot;: &#123;&#125;,</span><br><span class="line">        &quot;settings&quot;: &#123;</span><br><span class="line">            &quot;index&quot;: &#123;</span><br><span class="line">                &quot;creation_date&quot;: &quot;1553840645474&quot;,</span><br><span class="line">                &quot;number_of_shards&quot;: &quot;5&quot;,</span><br><span class="line">                &quot;number_of_replicas&quot;: &quot;1&quot;,</span><br><span class="line">                &quot;uuid&quot;: &quot;2uh6s1YxR4S_8AtA4JAR6g&quot;,</span><br><span class="line">                &quot;version&quot;: &#123;</span><br><span class="line">                    &quot;created&quot;: &quot;5061299&quot;</span><br><span class="line">                &#125;,</span><br><span class="line">                &quot;provided_name&quot;: &quot;foods&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>###文档API</p>
<blockquote>
<p>参考： <a href="https://www.elastic.co/guide/en/elasticsearch/reference/6.7/docs.html" target="_blank" rel="noopener">https://www.elastic.co/guide/en/elasticsearch/reference/6.7/docs.html</a></p>
</blockquote>
<p>​         程序中大多的实体或对象能够被序列化为包含键值对的JSON对象，<strong>键(key)</strong>是<strong>字段(field)</strong>或<strong>属性(property)</strong>的名字，<strong>值(value)</strong>可以是字符串、数字、布尔类型、另一个对象、值数组或者其他特殊类型，比如表示日期的字符串或者表示地理位置的对象。</p>
<p>​        通常，我们可以认为<strong>对象(object)</strong>和<strong>文档(document)</strong>是等价相通的。不过，他们还是有所差别：对象(Object)是一个JSON结构体——类似于哈希、hashmap、字典或者关联数组；对象(Object)中还可能包含其他对象(Object)。<br>在Elasticsearch中，<strong>文档(document)</strong>这个术语有着特殊含义。它特指最顶层结构或者<strong>根对象(root object)</strong>序列化成的JSON数据（以唯一ID标识并存储于Elasticsearch中）。</p>
<h4 id="4-文档元数据"><a href="#4-文档元数据" class="headerlink" title="4.文档元数据"></a>4.文档元数据</h4><p>​        一个文档不只有数据。它还包含了<strong>元数据(metadata)</strong>——<strong>关于</strong>文档的信息。三个必须的元数据节点是：</p>
<table>
<thead>
<tr>
<th>节点</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>_index</code></td>
<td>文档存储的地方</td>
</tr>
<tr>
<td><code>_type</code></td>
<td>文档代表的对象的类</td>
</tr>
<tr>
<td><code>_id</code></td>
<td>文档的唯一标识</td>
</tr>
</tbody>
</table>
<h4 id="5-添加文档数据"><a href="#5-添加文档数据" class="headerlink" title="5.添加文档数据"></a>5.添加文档数据</h4><p><strong>格式：</strong>  /_index/_type/_id</p>
<p>自增ID接口：  /foods/text/</p>
<p>自定义ID接口： /foods/text/1</p>
<p>方法： POST</p>
<p>参数：</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;蒸蛋&quot;,</span><br><span class="line">  &quot;price&quot;: 20.5,</span><br><span class="line">  &quot;images&quot;: &quot;foods/1.jpg&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>返回数据</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;_index&quot;: &quot;foods&quot;,</span><br><span class="line">    &quot;_type&quot;: &quot;text&quot;,</span><br><span class="line">    &quot;_id&quot;: &quot;AWnIMtiq2SkaP_lK0C2N&quot;,</span><br><span class="line">    &quot;_version&quot;: 1,</span><br><span class="line">    &quot;result&quot;: &quot;created&quot;,</span><br><span class="line">    &quot;_shards&quot;: &#123;</span><br><span class="line">        &quot;total&quot;: 2,</span><br><span class="line">        &quot;successful&quot;: 1,</span><br><span class="line">        &quot;failed&quot;: 0</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;created&quot;: true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h4 id="6-查询文档"><a href="#6-查询文档" class="headerlink" title="6.查询文档"></a>6.查询文档</h4><p>格式:   /index/type/id?_source=字段1,字段2&amp;pretty</p>
<p>说明：</p>
<ul>
<li>id 是添加的id值</li>
<li>_source 检索文档的一部分字段</li>
<li>pretty 美化输出</li>
</ul>
<p>请求方法： GET</p>
<p>如：  /foods/text/AWnIMtiq2SkaP_lK0C2N</p>
<p>###　搜索API</p>
<h4 id="1-空搜索"><a href="#1-空搜索" class="headerlink" title="1. 空搜索"></a>1. 空搜索</h4><p>接口： /_search</p>
<p>请求方法： GET</p>
<p>返回数据</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;took&quot;: 220,</span><br><span class="line">    &quot;timed_out&quot;: false,</span><br><span class="line">    &quot;_shards&quot;: &#123;</span><br><span class="line">        &quot;total&quot;: 10,</span><br><span class="line">        &quot;successful&quot;: 10,</span><br><span class="line">        &quot;skipped&quot;: 0,</span><br><span class="line">        &quot;failed&quot;: 0</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;hits&quot;: &#123;</span><br><span class="line">        &quot;total&quot;: 3,</span><br><span class="line">        &quot;max_score&quot;: 1,</span><br><span class="line">        &quot;hits&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;_index&quot;: &quot;foods&quot;,</span><br><span class="line">                &quot;_type&quot;: &quot;text&quot;,</span><br><span class="line">                &quot;_id&quot;: &quot;1&quot;,</span><br><span class="line">                &quot;_score&quot;: 1,</span><br><span class="line">                &quot;_source&quot;: &#123;</span><br><span class="line">                    &quot;name&quot;: &quot;蒸蛋&quot;,</span><br><span class="line">                    &quot;price&quot;: 20.5,</span><br><span class="line">                    &quot;images&quot;: &quot;foods/1.jpg&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;_index&quot;: &quot;foods&quot;,</span><br><span class="line">                &quot;_type&quot;: &quot;text&quot;,</span><br><span class="line">                &quot;_id&quot;: &quot;AWnIMtiq2SkaP_lK0C2N&quot;,</span><br><span class="line">                &quot;_score&quot;: 1,</span><br><span class="line">                &quot;_source&quot;: &#123;</span><br><span class="line">                    &quot;name&quot;: &quot;蒸蛋&quot;,</span><br><span class="line">                    &quot;price&quot;: 20.5,</span><br><span class="line">                    &quot;images&quot;: &quot;foods/1.jpg&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;_index&quot;: &quot;foods&quot;,</span><br><span class="line">                &quot;_type&quot;: &quot;text&quot;,</span><br><span class="line">                &quot;_id&quot;: &quot;3&quot;,</span><br><span class="line">                &quot;_score&quot;: 1,</span><br><span class="line">                &quot;_source&quot;: &#123;</span><br><span class="line">                    &quot;name&quot;: &quot;蒸饼&quot;,</span><br><span class="line">                    &quot;price&quot;: 1.5,</span><br><span class="line">                    &quot;images&quot;: &quot;foods/3.jpg&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p> 响应中最重要的部分是<code>hits</code>，它包含了<code>total</code>字段来表示匹配到的文档总数，<code>hits</code>数组还包含了匹配到的前10条数据。</p>
<p><code>hits</code>数组中的每个结果都包含<code>_index</code>、<code>_type</code>和文档的<code>_id</code>字段，被加入到<code>_source</code>字段中这意味着在搜索结果中我们将可以直接使用全部文档。这不像其他搜索引擎只返回文档ID，需要你单独去获取文档。</p>
<p>每个节点都有一个<code>_score</code>字段，这是<strong>相关性得分(relevance score)</strong>，它衡量了文档与查询的匹配程度。默认的，返回的结果中关联性最大的文档排在首位；这意味着，它是按照<code>_score</code>降序排列的。这种情况下，我们没有指定任何查询，所以所有文档的相关性是一样的，因此所有结果的<code>_score</code>都是取得一个中间值<code>1</code></p>
<p><code>max_score</code>指的是所有文档匹配查询中<code>_score</code>的最大值。</p>
<p>took   告诉我们整个搜索请求花费的毫秒数。</p>
<p><code>_shards</code>节点告诉我们参与查询的分片数（<code>total</code>字段），有多少是成功的（<code>successful</code>字段），有多少的是失败的（<code>failed</code>字段）。通常我们不希望分片失败，不过这个有可能发生。如果我们遭受一些重大的故障导致主分片和复制分片都故障，那这个分片的数据将无法响应给搜索请求。这种情况下，Elasticsearch将报告分片<code>failed</code>，但仍将继续返回剩余分片上的结果。</p>
<p><code>time_out</code>值告诉我们查询超时与否。一般的，搜索请求不会超时。如果响应速度比完整的结果更重要，你可以定义<code>timeout</code>参数为<code>10</code>或者<code>10ms</code>（10毫秒），或者<code>1s</code>（1秒）</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /_search?timeout=<span class="number">10</span>ms</span><br></pre></td></tr></table></figure></div>
<p>Elasticsearch将返回在请求超时前收集到的结果。</p>
<h4 id="2-多索引和多类型"><a href="#2-多索引和多类型" class="headerlink" title="2. 多索引和多类型"></a>2. 多索引和多类型</h4><ul>
<li>格式1： /index/_search，  如:  /foods/_search</li>
<li>格式2： /index1， index2/_search</li>
<li>格式3 ： /a*, b*/_search    使用*通配符</li>
<li>格式4： /_index1/_type/_search   在指定的索引和文档中搜索</li>
<li>格式5：  /index1， index2/_type1, _type2/_search</li>
<li>格式6： /_all/_type1, _type2/_search</li>
</ul>
<h4 id="3-分页"><a href="#3-分页" class="headerlink" title="3. 分页"></a>3. 分页</h4><p>在ES中，接受<code>from</code>和<code>size</code>参数, 类似于MySQL的limit关键字一样。</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">size`: 结果数，默认`10</span><br><span class="line">from`: 跳过开始的结果数，默认`0</span><br></pre></td></tr></table></figure></div>
<p>如果你想每页显示5个结果，页码从1到3，那请求如下：</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GET /_search?size=<span class="number">5</span></span><br><span class="line">GET /_search?size=<span class="number">5</span>&amp;<span class="keyword">from</span>=<span class="number">5</span></span><br><span class="line">GET /_search?size=<span class="number">5</span>&amp;<span class="keyword">from</span>=<span class="number">10</span></span><br></pre></td></tr></table></figure></div>
<h4 id="4-查询字符串"><a href="#4-查询字符串" class="headerlink" title="4. 查询字符串"></a>4. 查询字符串</h4><p>两种写法：</p>
<ul>
<li>查询字符串方式，将参数拼接到 url中</li>
<li>json格式的请求体</li>
</ul>
<p><strong>以上两种搜索写法，在ES中被称之为结构化查询语句(DSL)</strong>。</p>
<p>用法：</p>
<ul>
<li><div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET /_all/text/_search?q=name:蒸</span><br><span class="line">GET /_all/text/_search?q=name:蒸+name:john+price:<span class="number">1.5</span></span><br></pre></td></tr></table></figure></div>
<p><code>&quot;+&quot;</code>前缀表示语句匹配条件<strong>必须</strong>被满足。类似的<code>&quot;-&quot;</code>前缀表示条件<strong>必须不</strong>被满足。所有条件如果没有<code>+</code>或<code>-</code>表示是可选的——匹配越多，相关的文档就越多。</p>
</li>
</ul>
<p>  查询结果:</p>
  <div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;took&quot;: 10,</span><br><span class="line">    &quot;timed_out&quot;: false,</span><br><span class="line">    &quot;_shards&quot;: &#123;</span><br><span class="line">        &quot;total&quot;: 10,</span><br><span class="line">        &quot;successful&quot;: 10,</span><br><span class="line">        &quot;skipped&quot;: 0,</span><br><span class="line">        &quot;failed&quot;: 0</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;hits&quot;: &#123;</span><br><span class="line">        &quot;total&quot;: 1,</span><br><span class="line">        &quot;max_score&quot;: 0.62191015,</span><br><span class="line">        &quot;hits&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;_index&quot;: &quot;foods&quot;,</span><br><span class="line">                &quot;_type&quot;: &quot;text&quot;,</span><br><span class="line">                &quot;_id&quot;: &quot;3&quot;,</span><br><span class="line">                &quot;_score&quot;: 0.62191015,</span><br><span class="line">                &quot;_source&quot;: &#123;</span><br><span class="line">                    &quot;name&quot;: &quot;蒸饼&quot;,</span><br><span class="line">                    &quot;price&quot;: 1.5,</span><br><span class="line">                    &quot;images&quot;: &quot;foods/3.jpg&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>_all 全字段搜索</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /_search?q=mary</span><br></pre></td></tr></table></figure></div>

      
    </div>
    
      <footer class="article-footer">
        完
      </footer>
    
  </div>
  
    
<nav id="article-nav">
  <div class="article-nav-block">
    
      <a href="/Docker/在Ubuntu18-10安装Docker/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption"></strong>
        <div class="article-nav-title">
          
            在Ubuntu18.10安装Docker
          
        </div>
      </a>
    
  </div>
  <div class="article-nav-block">
    
      <a href="/爬虫/爬虫入门之常用方法的封装与实现/" id="article-nav-older" class="article-nav-link-wrap">
        <div class="article-nav-title">爬虫入门之常用方法的封装与实现</div>
        <strong class="article-nav-caption"></strong>
      </a>
    
  </div>
</nav>

    
<div id="gitmentContainer"></div>
<link rel="stylesheet" href="https://www.xuhuiblog.cn/css/gitment.css">
<script type="text/javascript" src="https://www.xuhuiblog.cn/js/gitment.js"></script>
<script type="text/javascript" src="https://www.xuhuiblog.cn/js/md5.min.js"></script>
<script>
var gitment = new Gitment({
  id: md5(window.location.pathname.replace(/index.html/, "")),
  owner: 'pighui',
  repo: 'myblogdes',
  oauth: {
    client_id: '79535b24d59031961e6c',
    client_secret: '4f1907f09f33c1182feb2ddfeef33677e8e5ff36',
  },
})
gitment.render('gitmentContainer')
</script>

  
  
</article>
</section>
                <aside id="sidebar">
    <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="360" height="86" src="//music.163.com/outchain/player?type=2&id=1346998796&auto=0&height=66"></iframe>
    
        <div class="widget-box">
    <div class="avatar-box">
        <img class="avatar" src="/images/default-avatar.jpeg" title="图片来自网络">
        <h3 class="avatar-name">
            
                一介书生
            
        </h3>
        <p class="avatar-slogan">
            盼 君 金 榜 题 名 时 。
寒 窗 苦 读 数 十 载 ，
        </p>
    </div>
</div>


    
        
  <div class="widget-box">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kali/">Kali</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Ubuntu/">Ubuntu</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据分析/">数据分析</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/机器学习/">机器学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/爬虫/">爬虫</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/面试题/">面试题</a></li></ul>
    </div>
  </div>


    
        
  <div class="widget-box">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kali/">Kali</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ubuntu/">Ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据分析/">数据分析</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/机器学习/">机器学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/测试/">测试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/爬虫/">爬虫</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/面试题/">面试题</a></li></ul>
    </div>
  </div>


    
        
  <div class="widget-box">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Docker/" style="font-size: 11.43px;">Docker</a> <a href="/tags/Hexo/" style="font-size: 12.86px;">Hexo</a> <a href="/tags/Kali/" style="font-size: 10px;">Kali</a> <a href="/tags/Python/" style="font-size: 20px;">Python</a> <a href="/tags/Ubuntu/" style="font-size: 15.71px;">Ubuntu</a> <a href="/tags/数据分析/" style="font-size: 18.57px;">数据分析</a> <a href="/tags/机器学习/" style="font-size: 14.29px;">机器学习</a> <a href="/tags/测试/" style="font-size: 11.43px;">测试</a> <a href="/tags/爬虫/" style="font-size: 17.14px;">爬虫</a> <a href="/tags/面试题/" style="font-size: 10px;">面试题</a>
    </div>
  </div>

    
        
  <div class="widget-box">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li></ul>
    </div>
  </div>

    
        
  <div class="widget-box">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/机器学习/人脸自动补全/">人脸自动补全</a>
          </li>
        
          <li>
            <a href="/机器学习/Logistics回归和数字识别/">Logistics回归和数字识别</a>
          </li>
        
          <li>
            <a href="/机器学习/LinearRegression线性回归/">LinearRegression线性回归</a>
          </li>
        
          <li>
            <a href="/机器学习/KNN-手写数字识别/">KNN-手写数字识别</a>
          </li>
        
          <li>
            <a href="/机器学习/K-近邻算法-KNN/">K-近邻算法（KNN）</a>
          </li>
        
      </ul>
    </div>
  </div>

    
          <div class="widget-box">
    <h3 class="widget-title">友链</h3>
    <div class="widget">
      
        <a style="display: block;" href="https://yiluyanxia.github.io/" title target="_blank">一路眼瞎</a>
      
        <a style="display: block;" href="https://wljsky.cn/" title target="_blank">钧金</a>
      
    </div>
  </div>

    
</aside>
            </div>
            <footer id="footer">
    <!-- 百度推送 -->
    <script>
        (function () {
            var bp = document.createElement('script');
            var curProtocol = window.location.protocol.split(':')[0];
            if (curProtocol === 'https') {
                bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
            } else {
                bp.src = 'http://push.zhanzhang.baidu.com/push.js';
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();
    </script>

    <!-- 百度统计 -->
    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?58e88d550a3485e4fa9494eb391c7e47";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=UA-135687698-1"></script> -->
    <script src="/js/google.js"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());
        gtag('set', {'user_id': 'UA-135687698-1'});
        gtag('config', 'UA-135687698-1');
    </script>
    <div class="foot-box global-width">
        &copy;Copyright&nbsp;2019 一介书生<br>
        驱动于 <a href="http://hexo.io/" target="_blank">Hexo</a>
        &nbsp;|&nbsp;主题 <a href="https://github.com/yiluyanxia/hexo-theme-antiquity">antiquity</a>
        <br>
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        <span id="busuanzi_container_site_pv">阁下是第<span id="busuanzi_value_site_pv"></span>个访客</span>
        <br>
        豫ICP备<a href="http://ha.beian.miit.gov.cn/">19008962</a>号
    </div>
</footer>
            <script src="//libs.baidu.com/jquery/2.1.4/jquery.min.js"></script>
<script>
    if (!window.jQuery) {
        var script = document.createElement('script');
        script.src = "/js/jquery.min.js";
        document.body.write(script);
    }
</script>

    <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
    <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



        </div>
        <nav id="mobile-nav" class="mobile-nav-box">
  <div class="mobile-nav-img mobile-nav-top"></div>
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="https://github.com/pighui" class="mobile-nav-link">基友</a>
  
    <a href="/archives" class="mobile-nav-link">文章</a>
  
    <a href="/me" class="mobile-nav-link">简历</a>
  
    <a href="/snow" class="mobile-nav-link">看雪</a>
  
  <div class="mobile-nav-img  mobile-nav-bottom"></div>
</nav>
    </div>
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script src="/js/love.js"></script>
    <script src="/js/snowy.js"></script>
    <style type="text/css">.snow-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100001;
        }</style>
    <div class="snow-container"></div>
</body>
</html>